<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Installation and usage · AutoSysimages.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">AutoSysimages.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">About</a></li><li class="is-active"><a class="tocitem" href>Installation and usage</a><ul class="internal"><li><a class="tocitem" href="#Script-for-Linux"><span>Script for Linux</span></a></li><li><a class="tocitem" href="#Script-for-Windows"><span>Script for Windows</span></a></li><li><a class="tocitem" href="#Basic-usage"><span>Basic usage</span></a></li><li><a class="tocitem" href="#How-it-works?"><span>How it works?</span></a></li><li><a class="tocitem" href="#Select-packages"><span>Select packages</span></a></li><li><a class="tocitem" href="#(Re)build-sysimage"><span>(Re)build sysimage</span></a></li></ul></li><li><a class="tocitem" href="../chained/">Faster compilation (experimental)</a></li><li><a class="tocitem" href="../api/">API Documentation</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Installation and usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Installation and usage</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/petvana/AutoSysimages.jl/blob/main/docs/src/install.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Installation-and-usage"><a class="docs-heading-anchor" href="#Installation-and-usage">Installation and usage</a><a id="Installation-and-usage-1"></a><a class="docs-heading-anchor-permalink" href="#Installation-and-usage" title="Permalink"></a></h1><p>You can easily install the package using the standard packaging system:</p><pre><code class="language-julia hljs">] add AutoSysimages</code></pre><p>The easiest way to use this package is to insert a small script somewhere into your path depending on your operation system.</p><h2 id="Script-for-Linux"><a class="docs-heading-anchor" href="#Script-for-Linux">Script for Linux</a><a id="Script-for-Linux-1"></a><a class="docs-heading-anchor-permalink" href="#Script-for-Linux" title="Permalink"></a></h2><p>On Linux, you can use the following bash script that is provided in <code>scripts/linux/asysimg</code>. The recommended location is <code>~/.local/bin/asysimg</code>.</p><pre><code class="language-bash hljs">#!/usr/bin/env bash
JULIA_EXE=julia     # or [INSERT-YOUR-PATH]/julia
asysimg_args=`$JULIA_EXE -e &quot;using AutoSysimages; print(julia_args()); exit();&quot;`
$JULIA_EXE $asysimg_args &quot;$@&quot;</code></pre><h2 id="Script-for-Windows"><a class="docs-heading-anchor" href="#Script-for-Windows">Script for Windows</a><a id="Script-for-Windows-1"></a><a class="docs-heading-anchor-permalink" href="#Script-for-Windows" title="Permalink"></a></h2><p>On Windows, you can use the following batch script that is provided in <code>scripts/windows/asysimg.bat</code>. It&#39;s recomended add Julia to <code>PATH</code> during installation, and but <code>asysimg.bat</code> into the binary file (e.g., <code>&quot;C:\\Users\\xxx\\AppData\\Local\\Programs\\Julia-1.X.X\\bin&quot;</code>).</p><pre><code class="language-bash hljs">@echo off
for /f &quot;tokens=1-4&quot; %%i in (&#39;julia.exe -e &quot;using AutoSysimages; print(julia_args()); exit()&quot;&#39;) do set A=%%i %%j %%k %%l 
@&quot;%~dp0\julia.exe&quot; %A% %*</code></pre><h2 id="Basic-usage"><a class="docs-heading-anchor" href="#Basic-usage">Basic usage</a><a id="Basic-usage-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-usage" title="Permalink"></a></h2><p>Once you install the package and save the script, you can easily run Julia from terminal, using one of the following options with any additional arguments, as normal. It automatically loads the latest system image for your project and start snooping for new precompile statements.</p><pre><code class="language-bash hljs">asysimg</code></pre><pre><code class="language-bash hljs">asysimg --project</code></pre><pre><code class="language-bash hljs">asysimg --project=examples/ExampleWithPlots</code></pre><h2 id="How-it-works?"><a class="docs-heading-anchor" href="#How-it-works?">How it works?</a><a id="How-it-works?-1"></a><a class="docs-heading-anchor-permalink" href="#How-it-works?" title="Permalink"></a></h2><p>In the first step, <code>asysimg</code> script detect if there exists a system image for the current project by calling <code>julia_args()</code> and print argument for Julia to load such image. Example of the produced arguments.</p><p>The first argument (<code>-J</code>) loads the latest system image and is present only if such an image is found. </p><pre><code class="language-bash hljs">-J /home/user/.julia/asysimg/1.X.X/4KnVCS/asysimg-2022-09-01T14:54:50.395.so</code></pre><p>where <code>4KnVCS</code> is a hash of the project path.</p><p>The second arguments (<code>-L []/src/start.jl</code>) initializes this package and start snooping for new precompiles statements.</p><pre><code class="language-bash hljs">-L [AutoSysimages-DIR]/src/start.jl</code></pre><p>Once the snooping is started it records precompile statements into a temporary files. When the Julia session is terminate, these statements are copied to project-specific file, like</p><pre><code class="nohighlight hljs">/home/user/.julia/asysimg/1.X.X/4KnVCS/snoop-file.jl</code></pre><h2 id="Select-packages"><a class="docs-heading-anchor" href="#Select-packages">Select packages</a><a id="Select-packages-1"></a><a class="docs-heading-anchor-permalink" href="#Select-packages" title="Permalink"></a></h2><p>You can select packages to be included into the project-specific system images. There is an interactive selection process that can be triggered by calling</p><pre><code class="language-julia hljs">using AutoSysimages
select_packages()</code></pre><p>That shows the manual selection (<code>asysimg --project=examples/ExampleWithPlots/</code>)</p><pre><code class="language-julia hljs">asysimg&gt; select_packages()
[ Info: Please select packages to be included into sysimage:
[press: Enter=toggle, a=all, n=none, d=done, q=abort]
 &gt; [ ] LinearAlgebra
   [ ] OhMyREPL
   [X] Plots
   [ ] Printf</code></pre><p>The settings are stored in <code>SysimagePreferences.toml</code>file just next to the current <code>Project.toml</code> file. You can modify the settings manually in the file.</p><pre><code class="nohighlight hljs">[AutoSysimages]
include = [&quot;Plots&quot;]
exclude = []</code></pre><p>To check which versions of the packages will be included, you can run</p><pre><code class="language-julia hljs">asysimg&gt; status()
    Project `/home/petr/repos/AutoSysimages/examples/ExampleWithPlots/Project.toml`
   Settings `/home/petr/repos/AutoSysimages/examples/ExampleWithPlots/SysimagePreferences.toml`
Packages to be included into sysimage:
  [91a5bcdd] Plots v1.31.7</code></pre><h2 id="(Re)build-sysimage"><a class="docs-heading-anchor" href="#(Re)build-sysimage">(Re)build sysimage</a><a id="(Re)build-sysimage-1"></a><a class="docs-heading-anchor-permalink" href="#(Re)build-sysimage" title="Permalink"></a></h2><p>You can rebuild your system image at any time, but the changes will be reflected only after you restart Julia (using <code>asysimg</code>). It automatically includes all the selected packages and recorded precompile statements.</p><pre><code class="nohighlight hljs">using AutoSysimages
build_sysimage()</code></pre><p>The sysimage will be generated by <a href="https://github.com/JuliaLang/PackageCompiler.jl">PackageCompiler</a>, or by very experimental <a href="../chained/#chained_build">chained builds</a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« About</a><a class="docs-footer-nextpage" href="../chained/">Faster compilation (experimental) »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Tuesday 6 September 2022 12:23">Tuesday 6 September 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
